# Создание своего плагина для Shark Remote с использованием PowerShell

### 1. Создайте папку с *названием в виде имени будущего плагина*

### 2. В данной папке (далее в гайде просто **main_folder**) (\*)

### 3. Создайте следующую структуру файлов

 ```
{main_folder}\main.manifest
{main_folder}\main.ps1
```

### 4. В файл **main.manifest** (текстовый файл манифеста плагина с надстройками) вставьте следующий текст

```ini
chat_action_type = 1
message_type = 1
arguments_count = 0
plugin_type = 0
```

**chat_action_type** - тип действия, которое будет написано в чате во время работы файла

*Значения*

- 0 - ничего не писать
- 1 - Бот набирает сообщение...

 **message_type** - тип возвращаемого сообщения в боте

*Значения*

- 0 - Текстовое сообщение
- 1 - Текстовое сообщение с поддержкой HTML форматирования
- 2 - Ничего не возвращать (*возможность добавлена в Shark Remote версии 4.3.1 Beta*)

 **arguments_count** - количество обязательных принимаемых аргументов плагина от пользователя

*Значения*

- От 0 до 4

 **plugin_type** - тип плагина, для Lua это "0" (в версиях Shark Remote до 4.7 - "1")

### 5. Основной код необходимо написать в файле **main.ps1** (файл кода написанный для *PowerShell*). Можно создать и редактировать с помощью *Windows PowerShell ISE*, который встроен в Windows

![image](https://user-images.githubusercontent.com/51060911/190862456-101a23fa-3ec2-4517-a5ab-86972b15b69c.png)

**Если Вы хотите использовать русский язык в каких-то фрагментах кода, то редактируйте файл в Notepad++ в кодировке UTF-8. Также, можно редактировать файла в Windows PowerShell ISE, а после сохранения изменить кодировку в Notepad++.**

![image](https://github.com/community/community/assets/51060911/908c61ee-1b2d-4bb9-94ed-3865adfc74f4)

### 6. Вставьте в файл **main.ps1** следующий код

```powershell
#app {plugin_name}, Version="{plugin_version}", Author={author}, Command={call_command}

function MainFunc($arg1, $arg2, $arg3, $arg4) {
 "Привет Мир! 3+4 = " + 3+4
}
```

### 7. Заполните данные (всё без пробелов)

- **{plugin_name}** - название плагина, такое же как для **{main_folder}**
- **{plugin_version}** - версия в формате x.x.x.x, где x - число (например: 1.0.0.4)
- **{author}** - автор плагина
- **{call_command}** - команда для вызова плагина (обязательно начинается с **/**), например: /hello

Должно получиться что-то похожее: ```#app HelloWorld, Version="1.0.0.0", Author=developer, Command=/hello```

**Данная строка является обязательной для файла плагина!**

### 8. Создайте zip архив с папкой **{main_folder}** (рекомендую воспользоваться архиватором [7-Zip](https://www.7-zip.org/) со сжатием **Нормальное**)

![image](https://user-images.githubusercontent.com/51060911/191972666-a2732f62-6bf0-4ff8-9e4c-eeaee52e6f08.png)

**Нужно заархивировать не саму папку, а её содержимое!**

### 9. Переименуйте файл в **{main_folder}** и измените расширение архива на ```srp```

## Примечание

\* **{main_folder}** = **main_folder**. Все переменные в гайде обозначаются в **фигурных скобках**